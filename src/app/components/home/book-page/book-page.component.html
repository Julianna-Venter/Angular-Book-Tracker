@if ((searchedBook$ | async); as currentBook){
<div class="w-full h-full absolute top-0 left-0 z-10">
  <div
    class="w-full h-full bg-grey flex justify-between lg:px-20 items-center pt-28 flex-col gap-5 overflow-y-auto overflow-x-hidden lg:flex-row"
  >
    <div
      class="h-full w-full flex flex-col justify-center items-center gap-5 px-10"
    >
      <img
        [src]="
          currentBook?.imageLink ||
          'https://www.marytribble.com/wp-content/uploads/2020/12/book-cover-placeholder.png'
        "
        alt="Book Cover"
        class="rounded-box border border-background-white/30 h-[314px] w-[210px]"
      />
      <div class="flex flex-col">
        <span class="text-2xl text-background-white text-center m-0">
          {{ currentBook?.title }}
        </span>
        @if (currentBook?.subtitle){
        <span class="text-lg font-extralight text-background-white text-center">
          {{ currentBook?.subtitle }}
        </span>
        }
      </div>
    </div>
    <div
      class="bg-background-white no-scrollbar h-fit w-full lg:w-1/2 rounded-t-3xl lg:rounded-3xl overflow-x-hidden flex-[0_0_auto] lg:overflow-y-scroll lg:max-h-[80%]"
    >
      <div class="w-full h-fit flex m-3 justify-center">
        <div
          class="w-1/2 flex flex-col justify-center items-start px-8 text-grey"
        >
          <mat-form-field class="w-full h-[4.5rem]">
            <mat-select [(value)]="selected" aria-label="select list">
              <mat-option value="unread" (click)="setSelectedBook('unread')"
                >Not Added</mat-option
              >
              <mat-option value="tbr" (click)="setSelectedBook('tbr')"
                >TBR</mat-option
              >
              <mat-option value="reading" (click)="setSelectedBook('reading')"
                >Reading</mat-option
              >
              <mat-option value="read" (click)="setSelectedBook('read')"
                >Read</mat-option
              >
              <mat-option value="dnf" (click)="setSelectedBook('dnf')"
                >DNF</mat-option
              >
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <div class="w-full h-fit flex m-3">
        <div
          class="w-1/2 flex flex-col justify-center items-start border-r border-light-grey px-8 text-grey"
        >
          <p class="font-semibold">{{ currentBook?.authors }}</p>
          <p class="text-xs">{{ currentBook?.publishedDate }}</p>
        </div>
        <div
          class="w-1/2 flex flex-col justify-center items-start px-8 py-2 text-grey text-sm"
        >
          <p class="font-semibold">
            {{ currentBook?.pageCount }}
            <span class="text-xs font-normal">Pages</span>
          </p>
        </div>
      </div>
      <div class="w-full h-fit flex m-3">
        <div
          class="w-1/2 flex flex-col justify-center items-start border-r border-light-grey px-8 text-grey"
        >
          <p class="font-light text-sm">
            {{ currentBook?.description?.substring(0, 400) }}...
          </p>
        </div>
        <div
          class="w-1/2 flex flex-wrap gap-2 justify-start px-4 py-2 text-grey text-sm"
        >
          @for (category of currentBook?.categories; track category) {
          <div class="badge badge-outline h-fit text-center">
            {{ category }}
          </div>
          }
        </div>
      </div>
      @if (selected === 'tbr') {
      <app-tbr
        (startReviewEvent)="changeSelected($event)"
        (returnDataEvent)="sendReviewData($event)"
      />
      } @else if (selected === 'reading' ) {
      <app-reading
        [dnf]="false"
        (completeReviewEvent)="changeSelected($event)"
        [reviewData]="reviewData"
        (reviewDataChange)="sendReviewData($event)"
      />
      } @else if (selected === 'read') {
      <app-have-read (updateReviewEvent)="changeSelected($event)" />
      } @else if (selected === 'dnf') {
      <app-reading
        [dnf]="true"
        (completeReviewEvent)="changeSelected($event)"
        [reviewData]="reviewData"
        (reviewDataChange)="sendReviewData($event)"
      />
      }
    </div>
  </div>
</div>
}
